<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Axios Mock Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        .output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ Simple Axios Mock Demo</h1>
        <p>This demo shows how to use <code>axios-mock-adapter</code> with your mock data.</p>
        
        <div>
            <button onclick="testAuth()">Test Authentication</button>
            <button onclick="testFetchPage1()">Fetch Page 1</button>
            <button onclick="testFetchPage2()">Fetch Page 2</button>
            <button onclick="testFetchPage3()">Fetch Page 3</button>
            <button onclick="testWithFilters()">Test with Filters</button>
            <button onclick="testInvalidPage()">Test Invalid Page</button>
            <button onclick="clearOutput()">Clear Output</button>
        </div>

        <div id="output" class="output">Click a button to test the mock API...</div>
    </div>

    <script type="module">
        import { setupAxiosMock, apiClient } from './src/mock/axiosMock.ts';
        
        // Setup the mock
        setupAxiosMock();
        
        // Make functions available globally
        window.testAuth = async () => {
            log('ðŸ” Testing authentication...', 'info');
            try {
                const result = await apiClient.authenticate('valid-token');
                log('âœ… Auth success: ' + JSON.stringify(result, null, 2), 'success');
            } catch (error) {
                log('âŒ Auth error: ' + error.message, 'error');
            }
        };

        window.testFetchPage1 = async () => {
            log('ðŸ“„ Fetching page 1...', 'info');
            try {
                const result = await apiClient.fetchData(1);
                log('âœ… Page 1 data: ' + JSON.stringify(result, null, 2), 'success');
            } catch (error) {
                log('âŒ Fetch error: ' + error.message, 'error');
            }
        };

        window.testFetchPage2 = async () => {
            log('ðŸ“„ Fetching page 2...', 'info');
            try {
                const result = await apiClient.fetchData(2);
                log('âœ… Page 2 data: ' + JSON.stringify(result, null, 2), 'success');
            } catch (error) {
                log('âŒ Fetch error: ' + error.message, 'error');
            }
        };

        window.testFetchPage3 = async () => {
            log('ðŸ“„ Fetching page 3...', 'info');
            try {
                const result = await apiClient.fetchData(3);
                log('âœ… Page 3 data: ' + JSON.stringify(result, null, 2), 'success');
            } catch (error) {
                log('âŒ Fetch error: ' + error.message, 'error');
            }
        };

        window.testWithFilters = async () => {
            log('ðŸ” Testing with filters...', 'info');
            try {
                const result = await apiClient.fetchDataWithFilters({
                    page: 1,
                    keywords: ['manchester united', 'transfer'],
                    platforms: ['twitter', 'instagram']
                });
                log('âœ… Filtered data: ' + JSON.stringify(result, null, 2), 'success');
            } catch (error) {
                log('âŒ Filter error: ' + error.message, 'error');
            }
        };

        window.testInvalidPage = async () => {
            log('â“ Testing invalid page...', 'info');
            try {
                const result = await apiClient.fetchData(999);
                log('âœ… Unexpected success: ' + JSON.stringify(result, null, 2), 'success');
            } catch (error) {
                log('âœ… Expected error (404): ' + error.response?.status + ' - ' + error.response?.data?.message, 'info');
            }
        };

        window.clearOutput = () => {
            document.getElementById('output').innerHTML = 'Output cleared...';
        };

        function log(message, type = 'info') {
            const output = document.getElementById('output');
            const timestamp = new Date().toLocaleTimeString();
            const className = type;
            output.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }

        // Initial message
        log('ðŸš€ Axios Mock Demo loaded. Click buttons to test!', 'info');
    </script>
</body>
</html>